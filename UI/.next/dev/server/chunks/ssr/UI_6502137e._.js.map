{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/hooks/useReaderState.ts"],"sourcesContent":["/**\r\n * Unified Reader State Management Hook\r\n * Integrates all reader functionality: parsing, pagination, translation, TTS, URL fetching\r\n */\r\n\r\n'use client'\r\n\r\nimport { useState, useCallback, useEffect, useRef } from 'react'\r\n\r\n// Types\r\nexport interface ReaderBlock {\r\n  id: string\r\n  type: 'paragraph' | 'image' | 'heading'\r\n  text?: string\r\n  url?: string\r\n  level?: number\r\n  meta?: Record<string, any>\r\n}\r\n\r\nexport interface ReaderState {\r\n  // Content\r\n  blocks: ReaderBlock[]\r\n  currentBlockIndex: number\r\n  totalBlocks: number\r\n\r\n  // Playback\r\n  isPlaying: boolean\r\n  speed: number\r\n  voice: string\r\n  autoScroll: boolean\r\n\r\n  // Translation\r\n  translationEnabled: boolean\r\n  targetLanguage: string\r\n  translations: Map<string, string>\r\n\r\n  // Progress\r\n  progress: number\r\n  timeRemaining: string\r\n\r\n  // Loading states\r\n  isLoading: boolean\r\n  isTranslating: boolean\r\n  isSpeaking: boolean\r\n\r\n  // Layout\r\n  layoutMode: 'single' | 'split' | 'overlay'\r\n}\r\n\r\nexport interface UseReaderStateReturn {\r\n  state: ReaderState\r\n\r\n  // Content actions\r\n  loadFromUrl: (url: string) => Promise<void>\r\n  loadFromFile: (file: File) => Promise<void>\r\n  loadBlocks: (blocks: ReaderBlock[]) => void\r\n\r\n  // Navigation\r\n  goToBlock: (index: number) => void\r\n  nextBlock: () => void\r\n  prevBlock: () => void\r\n\r\n  // Playback\r\n  togglePlay: () => void\r\n  setSpeed: (speed: number) => void\r\n  setVoice: (voice: string) => void\r\n  playBlock: (blockId: string) => void\r\n  stopPlayback: () => void\r\n\r\n  // Translation\r\n  toggleTranslation: () => void\r\n  setTargetLanguage: (lang: string) => void\r\n  translateBlock: (blockId: string) => Promise<void>\r\n  translateAllBlocks: () => Promise<void>\r\n\r\n  // Layout\r\n  setLayoutMode: (mode: 'single' | 'split' | 'overlay') => void\r\n\r\n  // Utility\r\n  reset: () => void\r\n}\r\n\r\nconst initialState: ReaderState = {\r\n  blocks: [],\r\n  currentBlockIndex: 0,\r\n  totalBlocks: 0,\r\n  isPlaying: false,\r\n  speed: 1.0,\r\n  voice: 'default',\r\n  autoScroll: true,\r\n  translationEnabled: false,\r\n  targetLanguage: 'zh',\r\n  translations: new Map(),\r\n  progress: 0,\r\n  timeRemaining: '0:00',\r\n  isLoading: false,\r\n  isTranslating: false,\r\n  isSpeaking: false,\r\n  layoutMode: 'single',\r\n}\r\n\r\nexport function useReaderState(): UseReaderStateReturn {\r\n  const [state, setState] = useState<ReaderState>(initialState)\r\n  const audioRef = useRef<HTMLAudioElement | null>(null)\r\n  const playbackTimerRef = useRef<NodeJS.Timeout | null>(null)\r\n\r\n  // ==========================================\r\n  // Content Loading\r\n  // ==========================================\r\n\r\n  /**\r\n   * Load content from URL\r\n   */\r\n  const loadFromUrl = useCallback(async (url: string) => {\r\n    setState(prev => ({ ...prev, isLoading: true }))\r\n\r\n    try {\r\n      const response = await fetch('/api/parse', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ url }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to parse URL: ${response.statusText}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n\r\n      if (data.success && data.blocks) {\r\n        loadBlocks(data.blocks)\r\n      } else {\r\n        throw new Error(data.error || 'Failed to parse URL')\r\n      }\r\n    } catch (error) {\r\n      console.error('[Reader] Load from URL error:', error)\r\n      // Fallback to demo blocks\r\n      loadDemoBlocks()\r\n    } finally {\r\n      setState(prev => ({ ...prev, isLoading: false }))\r\n    }\r\n  }, [])\r\n\r\n  /**\r\n   * Load content from file\r\n   */\r\n  const loadFromFile = useCallback(async (file: File) => {\r\n    setState(prev => ({ ...prev, isLoading: true }))\r\n\r\n    try {\r\n      const formData = new FormData()\r\n      formData.append('file', file)\r\n\r\n      const response = await fetch('/api/parse', {\r\n        method: 'POST',\r\n        body: formData,\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to parse file: ${response.statusText}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n\r\n      if (data.success && data.blocks) {\r\n        loadBlocks(data.blocks)\r\n      } else {\r\n        throw new Error(data.error || 'Failed to parse file')\r\n      }\r\n    } catch (error) {\r\n      console.error('[Reader] Load from file error:', error)\r\n      loadDemoBlocks()\r\n    } finally {\r\n      setState(prev => ({ ...prev, isLoading: false }))\r\n    }\r\n  }, [])\r\n\r\n  /**\r\n   * Load blocks directly\r\n   */\r\n  const loadBlocks = useCallback((blocks: ReaderBlock[]) => {\r\n    setState(prev => ({\r\n      ...prev,\r\n      blocks,\r\n      totalBlocks: blocks.length,\r\n      currentBlockIndex: 0,\r\n      progress: 0,\r\n      translations: new Map(),\r\n    }))\r\n  }, [])\r\n\r\n  /**\r\n   * Load demo blocks\r\n   */\r\n  const loadDemoBlocks = useCallback(() => {\r\n    const demoBlocks: ReaderBlock[] = [\r\n      {\r\n        id: 'demo-1',\r\n        type: 'heading',\r\n        text: 'The Great Gatsby - Chapter 1',\r\n        level: 1,\r\n      },\r\n      {\r\n        id: 'demo-2',\r\n        type: 'paragraph',\r\n        text: 'In my younger and more vulnerable years my father gave me some advice that I\\'ve been turning over in my mind ever since.',\r\n      },\r\n      {\r\n        id: 'demo-3',\r\n        type: 'paragraph',\r\n        text: '\"Whenever you feel like criticizing any one,\" he told me, \"just remember that all the people in this world haven\\'t had the advantages that you\\'ve had.\"',\r\n      },\r\n      {\r\n        id: 'demo-4',\r\n        type: 'paragraph',\r\n        text: 'He didn\\'t say any more, but we\\'ve always been unusually communicative in a reserved way, and I understood that he meant a great deal more than that.',\r\n      },\r\n      {\r\n        id: 'demo-5',\r\n        type: 'paragraph',\r\n        text: 'In consequence, I\\'m inclined to reserve all judgments, a habit that has opened up many curious natures to me and also made me the victim of not a few veteran bores.',\r\n      },\r\n    ]\r\n\r\n    loadBlocks(demoBlocks)\r\n  }, [loadBlocks])\r\n\r\n  // ==========================================\r\n  // Navigation\r\n  // ==========================================\r\n\r\n  const goToBlock = useCallback((index: number) => {\r\n    setState(prev => {\r\n      const newIndex = Math.max(0, Math.min(index, prev.totalBlocks - 1))\r\n      const progress = prev.totalBlocks > 0 ? (newIndex / prev.totalBlocks) * 100 : 0\r\n\r\n      return {\r\n        ...prev,\r\n        currentBlockIndex: newIndex,\r\n        progress,\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  const nextBlock = useCallback(() => {\r\n    setState(prev => {\r\n      if (prev.currentBlockIndex < prev.totalBlocks - 1) {\r\n        const newIndex = prev.currentBlockIndex + 1\r\n        const progress = (newIndex / prev.totalBlocks) * 100\r\n        return { ...prev, currentBlockIndex: newIndex, progress }\r\n      }\r\n      return prev\r\n    })\r\n  }, [])\r\n\r\n  const prevBlock = useCallback(() => {\r\n    setState(prev => {\r\n      if (prev.currentBlockIndex > 0) {\r\n        const newIndex = prev.currentBlockIndex - 1\r\n        const progress = (newIndex / prev.totalBlocks) * 100\r\n        return { ...prev, currentBlockIndex: newIndex, progress }\r\n      }\r\n      return prev\r\n    })\r\n  }, [])\r\n\r\n  // ==========================================\r\n  // Playback (TTS)\r\n  // ==========================================\r\n\r\n  const playCurrentBlock = useCallback(async () => {\r\n    const currentBlock = state.blocks[state.currentBlockIndex]\r\n    if (!currentBlock || !currentBlock.text) return\r\n\r\n    setState(prev => ({ ...prev, isSpeaking: true }))\r\n\r\n    try {\r\n      const response = await fetch('/api/tts', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          text: currentBlock.text,\r\n          voice: state.voice,\r\n          speed: state.speed,\r\n        }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error('TTS failed')\r\n      }\r\n\r\n      const data = await response.json()\r\n\r\n      if (data.success && data.audioUrl) {\r\n        // Play audio\r\n        if (audioRef.current) {\r\n          audioRef.current.src = data.audioUrl\r\n          audioRef.current.playbackRate = state.speed\r\n          await audioRef.current.play()\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('[Reader] TTS error:', error)\r\n      setState(prev => ({ ...prev, isSpeaking: false, isPlaying: false }))\r\n    }\r\n  }, [state.blocks, state.currentBlockIndex, state.voice, state.speed])\r\n\r\n  const togglePlay = useCallback(() => {\r\n    setState(prev => {\r\n      const newIsPlaying = !prev.isPlaying\r\n\r\n      if (newIsPlaying) {\r\n        playCurrentBlock()\r\n      } else {\r\n        if (audioRef.current) {\r\n          audioRef.current.pause()\r\n        }\r\n      }\r\n\r\n      return { ...prev, isPlaying: newIsPlaying }\r\n    })\r\n  }, [playCurrentBlock])\r\n\r\n  const setSpeed = useCallback((speed: number) => {\r\n    setState(prev => ({ ...prev, speed }))\r\n    if (audioRef.current) {\r\n      audioRef.current.playbackRate = speed\r\n    }\r\n  }, [])\r\n\r\n  const setVoice = useCallback((voice: string) => {\r\n    setState(prev => ({ ...prev, voice }))\r\n  }, [])\r\n\r\n  const playBlock = useCallback(async (blockId: string) => {\r\n    const blockIndex = state.blocks.findIndex(b => b.id === blockId)\r\n    if (blockIndex !== -1) {\r\n      goToBlock(blockIndex)\r\n      setState(prev => ({ ...prev, isPlaying: true }))\r\n      await playCurrentBlock()\r\n    }\r\n  }, [state.blocks, goToBlock, playCurrentBlock])\r\n\r\n  const stopPlayback = useCallback(() => {\r\n    if (audioRef.current) {\r\n      audioRef.current.pause()\r\n      audioRef.current.currentTime = 0\r\n    }\r\n    setState(prev => ({ ...prev, isPlaying: false, isSpeaking: false }))\r\n  }, [])\r\n\r\n  // ==========================================\r\n  // Translation\r\n  // ==========================================\r\n\r\n  const toggleTranslation = useCallback(() => {\r\n    setState(prev => ({ ...prev, translationEnabled: !prev.translationEnabled }))\r\n  }, [])\r\n\r\n  const setTargetLanguage = useCallback((lang: string) => {\r\n    setState(prev => ({\r\n      ...prev,\r\n      targetLanguage: lang,\r\n      translations: new Map(), // Clear cache when changing language\r\n    }))\r\n  }, [])\r\n\r\n  const translateBlock = useCallback(async (blockId: string) => {\r\n    const block = state.blocks.find(b => b.id === blockId)\r\n    if (!block || !block.text) return\r\n\r\n    // Check cache\r\n    if (state.translations.has(blockId)) return\r\n\r\n    setState(prev => ({ ...prev, isTranslating: true }))\r\n\r\n    try {\r\n      const response = await fetch('/api/translate', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          text: block.text,\r\n          targetLang: state.targetLanguage,\r\n        }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Translation failed')\r\n      }\r\n\r\n      const data = await response.json()\r\n\r\n      if (data.success && data.translated) {\r\n        setState(prev => {\r\n          const newTranslations = new Map(prev.translations)\r\n          newTranslations.set(blockId, data.translated)\r\n          return { ...prev, translations: newTranslations }\r\n        })\r\n      }\r\n    } catch (error) {\r\n      console.error('[Reader] Translation error:', error)\r\n    } finally {\r\n      setState(prev => ({ ...prev, isTranslating: false }))\r\n    }\r\n  }, [state.blocks, state.targetLanguage, state.translations])\r\n\r\n  const translateAllBlocks = useCallback(async () => {\r\n    for (const block of state.blocks) {\r\n      if (block.text && !state.translations.has(block.id)) {\r\n        await translateBlock(block.id)\r\n      }\r\n    }\r\n  }, [state.blocks, state.translations, translateBlock])\r\n\r\n  // ==========================================\r\n  // Layout\r\n  // ==========================================\r\n\r\n  const setLayoutMode = useCallback((mode: 'single' | 'split' | 'overlay') => {\r\n    setState(prev => ({ ...prev, layoutMode: mode }))\r\n  }, [])\r\n\r\n  // ==========================================\r\n  // Audio Element Setup\r\n  // ==========================================\r\n\r\n  useEffect(() => {\r\n    audioRef.current = new Audio()\r\n\r\n    audioRef.current.addEventListener('ended', () => {\r\n      setState(prev => ({ ...prev, isSpeaking: false }))\r\n\r\n      // Auto-advance to next block if playing\r\n      if (state.isPlaying && state.autoScroll) {\r\n        nextBlock()\r\n      } else {\r\n        setState(prev => ({ ...prev, isPlaying: false }))\r\n      }\r\n    })\r\n\r\n    return () => {\r\n      if (audioRef.current) {\r\n        audioRef.current.pause()\r\n        audioRef.current = null\r\n      }\r\n      if (playbackTimerRef.current) {\r\n        clearTimeout(playbackTimerRef.current)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // ==========================================\r\n  // Load demo on mount\r\n  // ==========================================\r\n\r\n  useEffect(() => {\r\n    if (state.blocks.length === 0) {\r\n      loadDemoBlocks()\r\n    }\r\n  }, [])\r\n\r\n  // ==========================================\r\n  // Reset\r\n  // ==========================================\r\n\r\n  const reset = useCallback(() => {\r\n    stopPlayback()\r\n    setState(initialState)\r\n  }, [stopPlayback])\r\n\r\n  return {\r\n    state,\r\n    loadFromUrl,\r\n    loadFromFile,\r\n    loadBlocks,\r\n    goToBlock,\r\n    nextBlock,\r\n    prevBlock,\r\n    togglePlay,\r\n    setSpeed,\r\n    setVoice,\r\n    playBlock,\r\n    stopPlayback,\r\n    toggleTranslation,\r\n    setTargetLanguage,\r\n    translateBlock,\r\n    translateAllBlocks,\r\n    setLayoutMode,\r\n    reset,\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 460, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/components/reader/block-component.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Play, FileEdit, Languages, Highlighter } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface BlockProps {\n  id: string\n  originalText: string\n  translation?: string\n  isActive?: boolean\n  onPlay?: (id: string) => void\n  onTranslate?: (id: string) => void\n}\n\nexport function BlockComponent({ id, originalText, translation, isActive, onPlay, onTranslate }: BlockProps) {\n  const [isHovered, setIsHovered] = useState(false)\n\n  return (\n    <div\n      className={cn(\n        \"group relative p-4 rounded-lg transition-colors mb-4 border border-transparent\",\n        isActive ? \"bg-primary/10 border-primary/20\" : \"hover:bg-muted/30\",\n      )}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      {/* Action Overlay */}\n      <div\n        className={cn(\n          \"absolute -top-3 right-4 flex gap-1 bg-background shadow-sm border rounded-full p-1 transition-opacity\",\n          isHovered || isActive ? \"opacity-100\" : \"opacity-0\",\n        )}\n      >\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"h-6 w-6 rounded-full\"\n          onClick={() => onPlay?.(id)}\n          title=\"Play Block\"\n        >\n          <Play className=\"h-3 w-3\" />\n        </Button>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"h-6 w-6 rounded-full\"\n          onClick={() => onTranslate?.(id)}\n          title=\"Translate\"\n        >\n          <Languages className=\"h-3 w-3\" />\n        </Button>\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 rounded-full\" title=\"Highlight\">\n          <Highlighter className=\"h-3 w-3\" />\n        </Button>\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 rounded-full\" title=\"Add Note\">\n          <FileEdit className=\"h-3 w-3\" />\n        </Button>\n      </div>\n\n      {/* Content */}\n      <div className=\"space-y-3\">\n        <p className=\"text-lg leading-relaxed text-foreground font-serif\">{originalText}</p>\n        {translation && (\n          <p className=\"text-base leading-relaxed text-muted-foreground font-sans border-l-2 border-primary/30 pl-3\">\n            {translation}\n          </p>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AALA;;;;;;AAgBO,SAAS,eAAe,EAAE,EAAE,EAAE,YAAY,EAAE,WAAW,EAAE,QAAQ,EAAE,MAAM,EAAE,WAAW,EAAc;IACzG,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,qBACE,8OAAC;QACC,WAAW,IAAA,wHAAE,EACX,kFACA,WAAW,oCAAoC;QAEjD,cAAc,IAAM,aAAa;QACjC,cAAc,IAAM,aAAa;;0BAGjC,8OAAC;gBACC,WAAW,IAAA,wHAAE,EACX,yGACA,aAAa,WAAW,gBAAgB;;kCAG1C,8OAAC,2IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,WAAU;wBACV,SAAS,IAAM,SAAS;wBACxB,OAAM;kCAEN,cAAA,8OAAC,0MAAI;4BAAC,WAAU;;;;;;;;;;;kCAElB,8OAAC,2IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,WAAU;wBACV,SAAS,IAAM,cAAc;wBAC7B,OAAM;kCAEN,cAAA,8OAAC,yNAAS;4BAAC,WAAU;;;;;;;;;;;kCAEvB,8OAAC,2IAAM;wBAAC,SAAQ;wBAAQ,MAAK;wBAAO,WAAU;wBAAuB,OAAM;kCACzE,cAAA,8OAAC,+NAAW;4BAAC,WAAU;;;;;;;;;;;kCAEzB,8OAAC,2IAAM;wBAAC,SAAQ;wBAAQ,MAAK;wBAAO,WAAU;wBAAuB,OAAM;kCACzE,cAAA,8OAAC,yNAAQ;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAKxB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAsD;;;;;;oBAClE,6BACC,8OAAC;wBAAE,WAAU;kCACV;;;;;;;;;;;;;;;;;;AAMb"}},
    {"offset": {"line": 600, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/components/reader/ReaderBlock.tsx"],"sourcesContent":["/**\r\n * Enhanced Reader Block Component\r\n * Integrates BlockComponent with useReaderState hook\r\n * Handles TTS playback, translation, highlights, and notes\r\n */\r\n\r\n'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { BlockComponent } from './block-component'\r\nimport { ReaderBlock as ReaderBlockType } from '../../hooks/useReaderState'\r\n\r\ninterface ReaderBlockProps {\r\n  block: ReaderBlockType\r\n  index: number\r\n  isActive: boolean\r\n  translation?: string\r\n  onPlay: (blockId: string) => void\r\n  onTranslate: (blockId: string) => Promise<void>\r\n  onHighlight?: (blockId: string, color: string) => void\r\n  onNote?: (blockId: string, content: string) => void\r\n}\r\n\r\nexport function ReaderBlock({\r\n  block,\r\n  index,\r\n  isActive,\r\n  translation,\r\n  onPlay,\r\n  onTranslate,\r\n  onHighlight,\r\n  onNote,\r\n}: ReaderBlockProps) {\r\n  const [isTranslating, setIsTranslating] = useState(false)\r\n\r\n  // Handle translation request\r\n  const handleTranslate = async () => {\r\n    if (isTranslating) return\r\n\r\n    setIsTranslating(true)\r\n    try {\r\n      await onTranslate(block.id)\r\n    } catch (error) {\r\n      console.error('[ReaderBlock] Translation failed:', error)\r\n    } finally {\r\n      setIsTranslating(false)\r\n    }\r\n  }\r\n\r\n  // Skip rendering for non-text blocks (images, headings handled separately)\r\n  if (block.type === 'image') {\r\n    return (\r\n      <div className=\"my-8 rounded-lg overflow-hidden border border-border\">\r\n        <img\r\n          src={block.url}\r\n          alt={block.meta?.alt || 'Content image'}\r\n          className=\"w-full h-auto\"\r\n        />\r\n        {block.meta?.caption && (\r\n          <p className=\"text-sm text-muted-foreground text-center p-3 bg-muted/30\">\r\n            {block.meta.caption}\r\n          </p>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (block.type === 'heading') {\r\n    const HeadingTag = `h${block.level || 2}` as keyof JSX.IntrinsicElements\r\n    return (\r\n      <HeadingTag\r\n        id={block.id}\r\n        className={`font-bold mb-4 mt-8 ${\r\n          block.level === 1\r\n            ? 'text-4xl'\r\n            : block.level === 2\r\n              ? 'text-3xl'\r\n              : 'text-2xl'\r\n        }`}\r\n      >\r\n        {block.text}\r\n      </HeadingTag>\r\n    )\r\n  }\r\n\r\n  // Regular paragraph block\r\n  if (!block.text) return null\r\n\r\n  return (\r\n    <div id={block.id} data-block-index={index}>\r\n      <BlockComponent\r\n        id={block.id}\r\n        originalText={block.text}\r\n        translation={translation}\r\n        isActive={isActive}\r\n        onPlay={onPlay}\r\n        onTranslate={handleTranslate}\r\n      />\r\n\r\n      {/* Translation loading indicator */}\r\n      {isTranslating && !translation && (\r\n        <div className=\"text-xs text-muted-foreground italic ml-4 -mt-2 mb-2\">\r\n          Translating...\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;AAID;AACA;AAHA;;;;AAiBO,SAAS,YAAY,EAC1B,KAAK,EACL,KAAK,EACL,QAAQ,EACR,WAAW,EACX,MAAM,EACN,WAAW,EACX,WAAW,EACX,MAAM,EACW;IACjB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IAEnD,6BAA6B;IAC7B,MAAM,kBAAkB;QACtB,IAAI,eAAe;QAEnB,iBAAiB;QACjB,IAAI;YACF,MAAM,YAAY,MAAM,EAAE;QAC5B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,qCAAqC;QACrD,SAAU;YACR,iBAAiB;QACnB;IACF;IAEA,2EAA2E;IAC3E,IAAI,MAAM,IAAI,KAAK,SAAS;QAC1B,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBACC,KAAK,MAAM,GAAG;oBACd,KAAK,MAAM,IAAI,EAAE,OAAO;oBACxB,WAAU;;;;;;gBAEX,MAAM,IAAI,EAAE,yBACX,8OAAC;oBAAE,WAAU;8BACV,MAAM,IAAI,CAAC,OAAO;;;;;;;;;;;;IAK7B;IAEA,IAAI,MAAM,IAAI,KAAK,WAAW;QAC5B,MAAM,aAAa,CAAC,CAAC,EAAE,MAAM,KAAK,IAAI,GAAG;QACzC,qBACE,8OAAC;YACC,IAAI,MAAM,EAAE;YACZ,WAAW,CAAC,oBAAoB,EAC9B,MAAM,KAAK,KAAK,IACZ,aACA,MAAM,KAAK,KAAK,IACd,aACA,YACN;sBAED,MAAM,IAAI;;;;;;IAGjB;IAEA,0BAA0B;IAC1B,IAAI,CAAC,MAAM,IAAI,EAAE,OAAO;IAExB,qBACE,8OAAC;QAAI,IAAI,MAAM,EAAE;QAAE,oBAAkB;;0BACnC,8OAAC,mKAAc;gBACb,IAAI,MAAM,EAAE;gBACZ,cAAc,MAAM,IAAI;gBACxB,aAAa;gBACb,UAAU;gBACV,QAAQ;gBACR,aAAa;;;;;;YAId,iBAAiB,CAAC,6BACjB,8OAAC;gBAAI,WAAU;0BAAuD;;;;;;;;;;;;AAM9E"}},
    {"offset": {"line": 707, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/components/reader/ReaderContent.tsx"],"sourcesContent":["/**\r\n * Reader Content Component\r\n * Displays all reader blocks with integrated TTS and translation\r\n * Connects to useReaderState for state management\r\n */\r\n\r\n'use client'\r\n\r\nimport { useEffect, useRef } from 'react'\r\nimport { ReaderBlock } from './ReaderBlock'\r\nimport { useReaderState, ReaderBlock as ReaderBlockType } from '../../hooks/useReaderState'\r\n\r\ninterface ReaderContentProps {\r\n  initialUrl?: string\r\n  initialBlocks?: ReaderBlockType[]\r\n  className?: string\r\n}\r\n\r\nexport function ReaderContent({ initialUrl, initialBlocks, className }: ReaderContentProps) {\r\n  const {\r\n    state,\r\n    loadFromUrl,\r\n    playBlock,\r\n    translateBlock,\r\n    goToBlock,\r\n  } = useReaderState()\r\n\r\n  const contentRef = useRef<HTMLDivElement>(null)\r\n  const activeBlockRef = useRef<HTMLDivElement>(null)\r\n\r\n  // Load initial content\r\n  useEffect(() => {\r\n    if (initialUrl) {\r\n      loadFromUrl(initialUrl)\r\n    } else if (initialBlocks) {\r\n      // loadBlocks(initialBlocks) - uncomment if needed\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []) // Only run on mount\r\n\r\n  // Auto-scroll to active block\r\n  useEffect(() => {\r\n    if (state.autoScroll && activeBlockRef.current) {\r\n      activeBlockRef.current.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'center',\r\n      })\r\n    }\r\n  }, [state.currentBlockIndex, state.autoScroll])\r\n\r\n  // Handle block click to activate\r\n  const handleBlockClick = (index: number) => {\r\n    goToBlock(index)\r\n  }\r\n\r\n  if (state.isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-center space-y-3\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\" />\r\n          <p className=\"text-muted-foreground\">Loading content...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (state.blocks.length === 0) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-center space-y-3\">\r\n          <p className=\"text-lg text-muted-foreground\">No content loaded</p>\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Upload a file or enter a URL to start reading\r\n          </p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={contentRef}\r\n      className={className || 'max-w-4xl mx-auto px-6 py-8 space-y-1'}\r\n    >\r\n      {state.blocks.map((block, index) => {\r\n        const isActive = index === state.currentBlockIndex\r\n        const translation = state.translationEnabled\r\n          ? state.translations.get(block.id)\r\n          : undefined\r\n\r\n        return (\r\n          <div\r\n            key={block.id}\r\n            ref={isActive ? activeBlockRef : null}\r\n            onClick={() => handleBlockClick(index)}\r\n            className=\"cursor-pointer\"\r\n          >\r\n            <ReaderBlock\r\n              block={block}\r\n              index={index}\r\n              isActive={isActive}\r\n              translation={translation}\r\n              onPlay={playBlock}\r\n              onTranslate={translateBlock}\r\n            />\r\n          </div>\r\n        )\r\n      })}\r\n\r\n      {/* Progress indicator */}\r\n      <div className=\"sticky bottom-0 left-0 right-0 h-1 bg-muted\">\r\n        <div\r\n          className=\"h-full bg-primary transition-all duration-300\"\r\n          style={{ width: `${state.progress}%` }}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;AAID;AACA;AACA;AAJA;;;;;AAYO,SAAS,cAAc,EAAE,UAAU,EAAE,aAAa,EAAE,SAAS,EAAsB;IACxF,MAAM,EACJ,KAAK,EACL,WAAW,EACX,SAAS,EACT,cAAc,EACd,SAAS,EACV,GAAG,IAAA,+IAAc;IAElB,MAAM,aAAa,IAAA,+MAAM,EAAiB;IAC1C,MAAM,iBAAiB,IAAA,+MAAM,EAAiB;IAE9C,uBAAuB;IACvB,IAAA,kNAAS,EAAC;QACR,IAAI,YAAY;YACd,YAAY;QACd,OAAO,IAAI,eAAe;QACxB,kDAAkD;QACpD;IACA,uDAAuD;IACzD,GAAG,EAAE,GAAE,oBAAoB;IAE3B,8BAA8B;IAC9B,IAAA,kNAAS,EAAC;QACR,IAAI,MAAM,UAAU,IAAI,eAAe,OAAO,EAAE;YAC9C,eAAe,OAAO,CAAC,cAAc,CAAC;gBACpC,UAAU;gBACV,OAAO;YACT;QACF;IACF,GAAG;QAAC,MAAM,iBAAiB;QAAE,MAAM,UAAU;KAAC;IAE9C,iCAAiC;IACjC,MAAM,mBAAmB,CAAC;QACxB,UAAU;IACZ;IAEA,IAAI,MAAM,SAAS,EAAE;QACnB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAI7C;IAEA,IAAI,MAAM,MAAM,CAAC,MAAM,KAAK,GAAG;QAC7B,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAgC;;;;;;kCAC7C,8OAAC;wBAAE,WAAU;kCAAgC;;;;;;;;;;;;;;;;;IAMrD;IAEA,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,aAAa;;YAEvB,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO;gBACxB,MAAM,WAAW,UAAU,MAAM,iBAAiB;gBAClD,MAAM,cAAc,MAAM,kBAAkB,GACxC,MAAM,YAAY,CAAC,GAAG,CAAC,MAAM,EAAE,IAC/B;gBAEJ,qBACE,8OAAC;oBAEC,KAAK,WAAW,iBAAiB;oBACjC,SAAS,IAAM,iBAAiB;oBAChC,WAAU;8BAEV,cAAA,8OAAC,yJAAW;wBACV,OAAO;wBACP,OAAO;wBACP,UAAU;wBACV,aAAa;wBACb,QAAQ;wBACR,aAAa;;;;;;mBAXV,MAAM,EAAE;;;;;YAenB;0BAGA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAU;oBACV,OAAO;wBAAE,OAAO,GAAG,MAAM,QAAQ,CAAC,CAAC,CAAC;oBAAC;;;;;;;;;;;;;;;;;AAK/C"}},
    {"offset": {"line": 877, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/components/ui/slider.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SliderPrimitive from '@radix-ui/react-slider'\n\nimport { cn } from '@/lib/utils'\n\nfunction Slider({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  ...props\n}: React.ComponentProps<typeof SliderPrimitive.Root>) {\n  const _values = React.useMemo(\n    () =>\n      Array.isArray(value)\n        ? value\n        : Array.isArray(defaultValue)\n          ? defaultValue\n          : [min, max],\n    [value, defaultValue, min, max],\n  )\n\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      className={cn(\n        'relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col',\n        className,\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className={\n          'bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5'\n        }\n      >\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={\n            'bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full'\n          }\n        />\n      </SliderPrimitive.Track>\n      {Array.from({ length: _values.length }, (_, index) => (\n        <SliderPrimitive.Thumb\n          data-slot=\"slider-thumb\"\n          key={index}\n          className=\"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\n        />\n      ))}\n    </SliderPrimitive.Root>\n  )\n}\n\nexport { Slider }\n"],"names":[],"mappings":";;;;;AAEA;;;;;;AAGA;AALA;;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,YAAY,EACZ,KAAK,EACL,MAAM,CAAC,EACP,MAAM,GAAG,EACT,GAAG,OAC+C;IAClD,MAAM,UAAU,gNAAa,CAC3B,IACE,MAAM,OAAO,CAAC,SACV,QACA,MAAM,OAAO,CAAC,gBACZ,eACA;YAAC;YAAK;SAAI,EAClB;QAAC;QAAO;QAAc;QAAK;KAAI;IAGjC,qBACE,8OAAC,gBAAgB,IAAI;QACnB,aAAU;QACV,cAAc;QACd,OAAO;QACP,KAAK;QACL,KAAK;QACL,WAAW,IAAA,wHAAE,EACX,uOACA;QAED,GAAG,KAAK;;0BAET,8OAAC,gBAAgB,KAAK;gBACpB,aAAU;gBACV,WACE;0BAGF,cAAA,8OAAC,gBAAgB,KAAK;oBACpB,aAAU;oBACV,WACE;;;;;;;;;;;YAIL,MAAM,IAAI,CAAC;gBAAE,QAAQ,QAAQ,MAAM;YAAC,GAAG,CAAC,GAAG,sBAC1C,8OAAC,gBAAgB,KAAK;oBACpB,aAAU;oBAEV,WAAU;mBADL;;;;;;;;;;;AAMf"}},
    {"offset": {"line": 951, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/components/ui/select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,gBAAgB,IAAI;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,gBAAgB,KAAK;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,gBAAgB,KAAK;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,8OAAC,gBAAgB,OAAO;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,wHAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,8OAAC,gBAAgB,IAAI;gBAAC,OAAO;0BAC3B,cAAA,8OAAC,2OAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,8OAAC,gBAAgB,MAAM;kBACrB,cAAA,8OAAC,gBAAgB,OAAO;YACtB,aAAU;YACV,WAAW,IAAA,wHAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,8OAAC;;;;;8BACD,8OAAC,gBAAgB,QAAQ;oBACvB,WAAW,IAAA,wHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,8OAAC;;;;;;;;;;;;;;;;AAIT;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,gBAAgB,KAAK;QACpB,aAAU;QACV,WAAW,IAAA,wHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,8OAAC,gBAAgB,IAAI;QACnB,aAAU;QACV,WAAW,IAAA,wHAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,gBAAgB,aAAa;8BAC5B,cAAA,8OAAC,qNAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,8OAAC,gBAAgB,QAAQ;0BAAE;;;;;;;;;;;;AAGjC;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,8OAAC,gBAAgB,SAAS;QACxB,aAAU;QACV,WAAW,IAAA,wHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,8OAAC,gBAAgB,cAAc;QAC7B,aAAU;QACV,WAAW,IAAA,wHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,qOAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,8OAAC,gBAAgB,gBAAgB;QAC/B,aAAU;QACV,WAAW,IAAA,wHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,2OAAe;YAAC,WAAU;;;;;;;;;;;AAGjC"}},
    {"offset": {"line": 1188, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/components/ui/popover.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as PopoverPrimitive from '@radix-ui/react-popover'\n\nimport { cn } from '@/lib/utils'\n\nfunction Popover({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) {\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />\n}\n\nfunction PopoverTrigger({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />\n}\n\nfunction PopoverContent({\n  className,\n  align = 'center',\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Content>) {\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        data-slot=\"popover-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden',\n          className,\n        )}\n        {...props}\n      />\n    </PopoverPrimitive.Portal>\n  )\n}\n\nfunction PopoverAnchor({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {\n  return <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />\n}\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAKA;AALA;;;;AAOA,SAAS,QAAQ,EACf,GAAG,OACgD;IACnD,qBAAO,8OAAC,iBAAiB,IAAI;QAAC,aAAU;QAAW,GAAG,KAAK;;;;;;AAC7D;AAEA,SAAS,eAAe,EACtB,GAAG,OACmD;IACtD,qBAAO,8OAAC,iBAAiB,OAAO;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,QAAQ,QAAQ,EAChB,aAAa,CAAC,EACd,GAAG,OACmD;IACtD,qBACE,8OAAC,iBAAiB,MAAM;kBACtB,cAAA,8OAAC,iBAAiB,OAAO;YACvB,aAAU;YACV,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,wHAAE,EACX,keACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,iBAAiB,MAAM;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE"}},
    {"offset": {"line": 1263, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/data/languages.ts"],"sourcesContent":["export const languages = [\n  { code: \"en\", name: \"English\" },\n  { code: \"es\", name: \"Spanish\" },\n  { code: \"fr\", name: \"French\" },\n  { code: \"de\", name: \"German\" },\n  { code: \"zh\", name: \"Chinese\" },\n  { code: \"ja\", name: \"Japanese\" },\n]\n\nexport const ttsPresets = [\n  { id: \"1\", name: \"Sarah (Standard)\", gender: \"female\", lang: \"en\" },\n  { id: \"2\", name: \"Michael (Deep)\", gender: \"male\", lang: \"en\" },\n  { id: \"3\", name: \"Emma (British)\", gender: \"female\", lang: \"en-GB\" },\n  { id: \"4\", name: \"Mateo (Spanish)\", gender: \"male\", lang: \"es\" },\n]\n\nexport const mockBooks = [\n  {\n    id: \"1\",\n    title: \"The Great Gatsby\",\n    author: \"F. Scott Fitzgerald\",\n    cover: \"/placeholder.svg?height=300&width=200&text=Gatsby\",\n  },\n  { id: \"2\", title: \"1984\", author: \"George Orwell\", cover: \"/placeholder.svg?height=300&width=200&text=1984\" },\n  {\n    id: \"3\",\n    title: \"Thinking, Fast and Slow\",\n    author: \"Daniel Kahneman\",\n    cover: \"/placeholder.svg?height=300&width=200&text=Thinking\",\n  },\n]\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,YAAY;IACvB;QAAE,MAAM;QAAM,MAAM;IAAU;IAC9B;QAAE,MAAM;QAAM,MAAM;IAAU;IAC9B;QAAE,MAAM;QAAM,MAAM;IAAS;IAC7B;QAAE,MAAM;QAAM,MAAM;IAAS;IAC7B;QAAE,MAAM;QAAM,MAAM;IAAU;IAC9B;QAAE,MAAM;QAAM,MAAM;IAAW;CAChC;AAEM,MAAM,aAAa;IACxB;QAAE,IAAI;QAAK,MAAM;QAAoB,QAAQ;QAAU,MAAM;IAAK;IAClE;QAAE,IAAI;QAAK,MAAM;QAAkB,QAAQ;QAAQ,MAAM;IAAK;IAC9D;QAAE,IAAI;QAAK,MAAM;QAAkB,QAAQ;QAAU,MAAM;IAAQ;IACnE;QAAE,IAAI;QAAK,MAAM;QAAmB,QAAQ;QAAQ,MAAM;IAAK;CAChE;AAEM,MAAM,YAAY;IACvB;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,OAAO;IACT;IACA;QAAE,IAAI;QAAK,OAAO;QAAQ,QAAQ;QAAiB,OAAO;IAAkD;IAC5G;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,OAAO;IACT;CACD"}},
    {"offset": {"line": 1347, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/components/reader/EnhancedBottomControlBar.tsx"],"sourcesContent":["/**\r\n * Enhanced Bottom Control Bar\r\n * Integrates with useReaderState for playback control\r\n * Provides TTS controls, progress tracking, and layout modes\r\n */\r\n\r\n'use client'\r\n\r\nimport { Button } from '@/components/ui/button'\r\nimport { Slider } from '@/components/ui/slider'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from '@/components/ui/popover'\r\nimport {\r\n  Play,\r\n  Pause,\r\n  SkipBack,\r\n  SkipForward,\r\n  Settings2,\r\n  ScrollText,\r\n  Layers,\r\n} from 'lucide-react'\r\nimport { ttsPresets } from '@/data/languages'\r\nimport { UseReaderStateReturn } from '../../hooks/useReaderState'\r\n\r\ninterface EnhancedBottomControlBarProps {\r\n  readerState: UseReaderStateReturn\r\n}\r\n\r\nexport function EnhancedBottomControlBar({\r\n  readerState,\r\n}: EnhancedBottomControlBarProps) {\r\n  const { state, togglePlay, prevBlock, nextBlock, setSpeed, setVoice, setLayoutMode } =\r\n    readerState\r\n\r\n  // Format time remaining\r\n  const formatTime = (seconds: number): string => {\r\n    const mins = Math.floor(seconds / 60)\r\n    const secs = Math.floor(seconds % 60)\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`\r\n  }\r\n\r\n  // Calculate estimated time remaining (rough estimate: 150 words/min)\r\n  const estimateTimeRemaining = (): string => {\r\n    const remainingBlocks = state.blocks.slice(state.currentBlockIndex + 1)\r\n    const totalWords = remainingBlocks.reduce((acc, block) => {\r\n      return acc + (block.text?.split(' ').length || 0)\r\n    }, 0)\r\n    const minutes = totalWords / 150 / state.speed\r\n    const totalSeconds = Math.ceil(minutes * 60)\r\n    return formatTime(totalSeconds)\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-20 border-t bg-background flex items-center px-4 gap-4 sticky bottom-0 z-40 shadow-[0_-1px_6px_rgba(0,0,0,0.05)]\">\r\n      {/* Playback Controls */}\r\n      <div className=\"flex items-center gap-2\">\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"icon\"\r\n          onClick={prevBlock}\r\n          disabled={state.currentBlockIndex === 0}\r\n          title=\"Previous Block\"\r\n        >\r\n          <SkipBack className=\"h-5 w-5\" />\r\n        </Button>\r\n\r\n        <Button\r\n          className=\"h-12 w-12 rounded-full shadow-md\"\r\n          onClick={togglePlay}\r\n          disabled={state.blocks.length === 0}\r\n          title={state.isPlaying ? 'Pause' : 'Play'}\r\n        >\r\n          {state.isPlaying ? (\r\n            <Pause className=\"fill-current h-5 w-5\" />\r\n          ) : (\r\n            <Play className=\"fill-current h-5 w-5\" />\r\n          )}\r\n        </Button>\r\n\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"icon\"\r\n          onClick={nextBlock}\r\n          disabled={state.currentBlockIndex >= state.totalBlocks - 1}\r\n          title=\"Next Block\"\r\n        >\r\n          <SkipForward className=\"h-5 w-5\" />\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Progress */}\r\n      <div className=\"flex-1 px-4 flex flex-col justify-center gap-1\">\r\n        <div className=\"flex justify-between text-xs text-muted-foreground font-medium\">\r\n          <span>\r\n            Block {state.currentBlockIndex + 1}/{state.totalBlocks}\r\n          </span>\r\n          <span>{estimateTimeRemaining()} remaining</span>\r\n        </div>\r\n        <Slider\r\n          value={[state.progress]}\r\n          max={100}\r\n          step={0.1}\r\n          className=\"w-full\"\r\n          onValueChange={(value) => {\r\n            const newIndex = Math.round((value[0] / 100) * state.totalBlocks)\r\n            readerState.goToBlock(newIndex)\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* Tools */}\r\n      <div className=\"flex items-center gap-3 border-l pl-4\">\r\n        {/* Voice Selector */}\r\n        <div className=\"flex items-center gap-2 min-w-[140px]\">\r\n          <Select value={state.voice} onValueChange={setVoice}>\r\n            <SelectTrigger className=\"h-8 text-xs\">\r\n              <SelectValue placeholder=\"Select Voice\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {ttsPresets.map((preset) => (\r\n                <SelectItem key={preset.id} value={preset.id}>\r\n                  {preset.name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n\r\n        {/* Speed/Pitch Settings */}\r\n        <Popover>\r\n          <PopoverTrigger asChild>\r\n            <Button variant=\"ghost\" size=\"icon\" title=\"Audio Settings\">\r\n              <Settings2 className=\"h-5 w-5\" />\r\n            </Button>\r\n          </PopoverTrigger>\r\n          <PopoverContent className=\"w-64 space-y-4\">\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-xs font-medium\">\r\n                Speed: {state.speed.toFixed(1)}x\r\n              </label>\r\n              <Slider\r\n                value={[state.speed]}\r\n                onValueChange={(value) => setSpeed(value[0])}\r\n                min={0.5}\r\n                max={3}\r\n                step={0.1}\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-xs font-medium text-muted-foreground\">\r\n                Pitch (Not yet implemented)\r\n              </label>\r\n              <Slider defaultValue={[1]} min={0.5} max={2} step={0.1} disabled />\r\n            </div>\r\n          </PopoverContent>\r\n        </Popover>\r\n\r\n        {/* Layout Mode */}\r\n        <Select\r\n          value={state.layoutMode}\r\n          onValueChange={(value) =>\r\n            setLayoutMode(value as 'single' | 'split' | 'overlay')\r\n          }\r\n        >\r\n          <SelectTrigger className=\"w-[40px] px-0 justify-center h-9\">\r\n            <Layers className=\"h-4 w-4\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"single\">Single Pane</SelectItem>\r\n            <SelectItem value=\"split\">Split View</SelectItem>\r\n            <SelectItem value=\"overlay\">Overlay</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n\r\n        {/* Auto Scroll Toggle */}\r\n        <Button\r\n          variant={state.autoScroll ? 'secondary' : 'ghost'}\r\n          size=\"icon\"\r\n          title={state.autoScroll ? 'Auto Scroll: ON' : 'Auto Scroll: OFF'}\r\n          className=\"hidden sm:flex\"\r\n          onClick={() => {\r\n            // Toggle autoScroll (we'll need to add this to useReaderState)\r\n            console.log('Auto-scroll toggle clicked')\r\n          }}\r\n        >\r\n          <ScrollText className=\"h-5 w-5\" />\r\n        </Button>\r\n\r\n        {/* Status Indicators */}\r\n        {state.isSpeaking && (\r\n          <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\r\n            <div className=\"flex gap-1\">\r\n              <div className=\"w-1 h-3 bg-primary animate-pulse rounded-full\" />\r\n              <div\r\n                className=\"w-1 h-3 bg-primary animate-pulse rounded-full\"\r\n                style={{ animationDelay: '0.2s' }}\r\n              />\r\n              <div\r\n                className=\"w-1 h-3 bg-primary animate-pulse rounded-full\"\r\n                style={{ animationDelay: '0.4s' }}\r\n              />\r\n            </div>\r\n            <span className=\"hidden md:inline\">Speaking...</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1820, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/components/ui/tabs.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\n\nimport { cn } from '@/lib/utils'\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn('flex flex-col gap-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn('flex-1 outline-none', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAKA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8OAAC,cAAc,IAAI;QACjB,aAAU;QACV,WAAW,IAAA,wHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8OAAC,cAAc,IAAI;QACjB,aAAU;QACV,WAAW,IAAA,wHAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,cAAc,OAAO;QACpB,aAAU;QACV,WAAW,IAAA,wHAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,cAAc,OAAO;QACpB,aAAU;QACV,WAAW,IAAA,wHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1890, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/components/ui/scroll-area.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ScrollAreaPrimitive from '@radix-ui/react-scroll-area'\n\nimport { cn } from '@/lib/utils'\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn('relative', className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  )\n}\n\nfunction ScrollBar({\n  className,\n  orientation = 'vertical',\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        'flex touch-none p-px transition-colors select-none',\n        orientation === 'vertical' &&\n          'h-full w-2.5 border-l border-l-transparent',\n        orientation === 'horizontal' &&\n          'h-2.5 flex-col border-t border-t-transparent',\n        className,\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  )\n}\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;;;;;;AAKA;AALA;;;;AAOA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,8OAAC,oBAAoB,IAAI;QACvB,aAAU;QACV,WAAW,IAAA,wHAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;0BAET,8OAAC,oBAAoB,QAAQ;gBAC3B,aAAU;gBACV,WAAU;0BAET;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,oBAAoB,MAAM;;;;;;;;;;;AAGjC;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE;IACrE,qBACE,8OAAC,oBAAoB,mBAAmB;QACtC,aAAU;QACV,aAAa;QACb,WAAW,IAAA,wHAAE,EACX,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,oBAAoB,eAAe;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB"}},
    {"offset": {"line": 1964, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,wHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1989, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/components/reader/EnhancedRightSidePanel.tsx"],"sourcesContent":["/**\r\n * Enhanced Right Side Panel\r\n * Integrates with useReaderState and AI Deep Reading features\r\n * Provides TOC, Translation, AI features, and Notes\r\n */\r\n\r\n'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\r\nimport { ScrollArea } from '@/components/ui/scroll-area'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport { Input } from '@/components/ui/input'\r\nimport { List, Languages, Sparkles, Highlighter, Send } from 'lucide-react'\r\nimport { languages } from '@/data/languages'\r\nimport { UseReaderStateReturn, ReaderBlock } from '../../hooks/useReaderState'\r\n\r\ninterface EnhancedRightSidePanelProps {\r\n  readerState: UseReaderStateReturn\r\n  onGenerateSummary?: () => void\r\n  onAskQuestion?: (question: string) => void\r\n}\r\n\r\nexport function EnhancedRightSidePanel({\r\n  readerState,\r\n  onGenerateSummary,\r\n  onAskQuestion,\r\n}: EnhancedRightSidePanelProps) {\r\n  const {\r\n    state,\r\n    toggleTranslation,\r\n    setTargetLanguage,\r\n    translateAllBlocks,\r\n    goToBlock,\r\n  } = readerState\r\n\r\n  const [aiQuestion, setAiQuestion] = useState('')\r\n  const [translationMode, setTranslationMode] = useState<'paragraph' | 'word'>(\r\n    'paragraph'\r\n  )\r\n\r\n  // Extract headings for TOC\r\n  const tocItems = state.blocks\r\n    .map((block, index) => ({\r\n      block,\r\n      index,\r\n    }))\r\n    .filter(({ block }) => block.type === 'heading')\r\n\r\n  // Handle translation language change\r\n  const handleLanguageChange = (lang: string) => {\r\n    setTargetLanguage(lang)\r\n    if (state.translationEnabled) {\r\n      // Re-translate with new language\r\n      translateAllBlocks()\r\n    }\r\n  }\r\n\r\n  // Handle AI question submission\r\n  const handleAskQuestion = () => {\r\n    if (aiQuestion.trim() && onAskQuestion) {\r\n      onAskQuestion(aiQuestion.trim())\r\n      setAiQuestion('')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-80 border-l bg-muted/10 flex flex-col h-[calc(100vh-4rem-5rem)]\">\r\n      <Tabs defaultValue=\"toc\" className=\"flex-1 flex flex-col\">\r\n        <div className=\"px-4 pt-4\">\r\n          <TabsList className=\"grid w-full grid-cols-4\">\r\n            <TabsTrigger value=\"toc\" title=\"Table of Contents\">\r\n              <List className=\"h-4 w-4\" />\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"translate\" title=\"Translation\">\r\n              <Languages className=\"h-4 w-4\" />\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"ai\" title=\"AI Features\">\r\n              <Sparkles className=\"h-4 w-4\" />\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"notes\" title=\"Notes & Highlights\">\r\n              <Highlighter className=\"h-4 w-4\" />\r\n            </TabsTrigger>\r\n          </TabsList>\r\n        </div>\r\n\r\n        <ScrollArea className=\"flex-1\">\r\n          <div className=\"p-4\">\r\n            {/* ==================== TOC Tab ==================== */}\r\n            <TabsContent value=\"toc\" className=\"mt-0\">\r\n              <h3 className=\"font-semibold mb-3\">Table of Contents</h3>\r\n              {tocItems.length > 0 ? (\r\n                <nav className=\"space-y-1\">\r\n                  {tocItems.map(({ block, index }) => (\r\n                    <Button\r\n                      key={block.id}\r\n                      variant=\"ghost\"\r\n                      className=\"w-full justify-start text-sm font-normal h-auto py-2 hover:bg-primary/10\"\r\n                      style={{\r\n                        paddingLeft: `${((block.level || 1) - 1) * 12 + 16}px`,\r\n                      }}\r\n                      onClick={() => goToBlock(index)}\r\n                    >\r\n                      {block.text}\r\n                    </Button>\r\n                  ))}\r\n                </nav>\r\n              ) : (\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  No headings found in document\r\n                </p>\r\n              )}\r\n            </TabsContent>\r\n\r\n            {/* ==================== Translation Tab ==================== */}\r\n            <TabsContent value=\"translate\" className=\"mt-0 space-y-6\">\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium\">Translate to</label>\r\n                <Select\r\n                  value={state.targetLanguage}\r\n                  onValueChange={handleLanguageChange}\r\n                >\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Select Language\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {languages.map((l) => (\r\n                      <SelectItem key={l.code} value={l.code}>\r\n                        {l.name}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium\">Mode</label>\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    className={\r\n                      translationMode === 'paragraph'\r\n                        ? 'bg-primary/10 border-primary'\r\n                        : ''\r\n                    }\r\n                    onClick={() => setTranslationMode('paragraph')}\r\n                  >\r\n                    Paragraph\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    className={\r\n                      translationMode === 'word'\r\n                        ? 'bg-primary/10 border-primary'\r\n                        : ''\r\n                    }\r\n                    onClick={() => setTranslationMode('word')}\r\n                    disabled\r\n                  >\r\n                    Word\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Button\r\n                  variant={state.translationEnabled ? 'default' : 'outline'}\r\n                  className=\"w-full\"\r\n                  onClick={toggleTranslation}\r\n                >\r\n                  {state.translationEnabled\r\n                    ? 'Translation Enabled'\r\n                    : 'Enable Translation'}\r\n                </Button>\r\n\r\n                {state.translationEnabled && (\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    className=\"w-full\"\r\n                    onClick={() => translateAllBlocks()}\r\n                    disabled={state.isTranslating}\r\n                  >\r\n                    {state.isTranslating\r\n                      ? 'Translating...'\r\n                      : 'Translate All Blocks'}\r\n                  </Button>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"text-xs text-muted-foreground space-y-1\">\r\n                <p>\r\n                  Translated: {state.translations.size}/{state.totalBlocks} blocks\r\n                </p>\r\n                {state.isTranslating && (\r\n                  <p className=\"text-primary\">Translation in progress...</p>\r\n                )}\r\n              </div>\r\n            </TabsContent>\r\n\r\n            {/* ==================== AI Tab ==================== */}\r\n            <TabsContent value=\"ai\" className=\"mt-0 space-y-4\">\r\n              {/* Ask the Book */}\r\n              <div className=\"p-3 bg-primary/5 rounded-lg border\">\r\n                <h4 className=\"font-medium text-sm flex items-center gap-2 mb-2\">\r\n                  <Sparkles className=\"h-3 w-3 text-primary\" /> Ask the Book\r\n                </h4>\r\n                <p className=\"text-xs text-muted-foreground mb-3\">\r\n                  Ask questions about characters, plot, or themes.\r\n                </p>\r\n                <div className=\"flex gap-2\">\r\n                  <Input\r\n                    placeholder=\"Type your question...\"\r\n                    value={aiQuestion}\r\n                    onChange={(e) => setAiQuestion(e.target.value)}\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') {\r\n                        handleAskQuestion()\r\n                      }\r\n                    }}\r\n                    className=\"text-sm\"\r\n                  />\r\n                  <Button\r\n                    size=\"icon\"\r\n                    onClick={handleAskQuestion}\r\n                    disabled={!aiQuestion.trim()}\r\n                  >\r\n                    <Send className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* AI Features */}\r\n              <div className=\"space-y-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"w-full justify-start text-sm bg-transparent\"\r\n                  onClick={onGenerateSummary}\r\n                >\r\n                  <Sparkles className=\"h-4 w-4 mr-2\" />\r\n                  Generate Chapter Summary\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"w-full justify-start text-sm bg-transparent\"\r\n                  disabled\r\n                >\r\n                  <Sparkles className=\"h-4 w-4 mr-2\" />\r\n                  Generate Quiz\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"w-full justify-start text-sm bg-transparent\"\r\n                  disabled\r\n                >\r\n                  <Sparkles className=\"h-4 w-4 mr-2\" />\r\n                  Create Flashcards\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"w-full justify-start text-sm bg-transparent\"\r\n                  disabled\r\n                >\r\n                  <Sparkles className=\"h-4 w-4 mr-2\" />\r\n                  Generate Study Plan\r\n                </Button>\r\n              </div>\r\n\r\n              <div className=\"text-xs text-muted-foreground p-2 bg-muted/30 rounded\">\r\n                <p className=\"mb-1 font-medium\">AI Features:</p>\r\n                <ul className=\"list-disc list-inside space-y-1\">\r\n                  <li>Layered summaries</li>\r\n                  <li>Interactive quizzes</li>\r\n                  <li>Flashcard generation</li>\r\n                  <li>Cross-chapter Q&A</li>\r\n                </ul>\r\n              </div>\r\n            </TabsContent>\r\n\r\n            {/* ==================== Notes Tab ==================== */}\r\n            <TabsContent value=\"notes\" className=\"mt-0\">\r\n              <h3 className=\"font-semibold mb-3\">Notes & Highlights</h3>\r\n              <div className=\"space-y-3\">\r\n                {/* Placeholder for notes */}\r\n                <div className=\"text-sm text-muted-foreground text-center py-8\">\r\n                  <Highlighter className=\"h-8 w-8 mx-auto mb-2 opacity-30\" />\r\n                  <p>No notes or highlights yet</p>\r\n                  <p className=\"text-xs mt-1\">\r\n                    Click the highlight button on any block to add\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Example note (will be dynamic) */}\r\n                {/* <div className=\"p-3 bg-yellow-500/10 border border-yellow-500/20 rounded text-sm\">\r\n                  <p className=\"mb-1 italic\">\"The green light...\"</p>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    Symbol of hope and the American Dream.\r\n                  </p>\r\n                </div> */}\r\n              </div>\r\n            </TabsContent>\r\n          </div>\r\n        </ScrollArea>\r\n      </Tabs>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2655, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/components/ui/dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,gBAAgB,IAAI;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,gBAAgB,OAAO;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8OAAC,gBAAgB,MAAM;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,gBAAgB,KAAK;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8OAAC,gBAAgB,OAAO;QACtB,aAAU;QACV,WAAW,IAAA,wHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,8OAAC;QAAa,aAAU;;0BACtB,8OAAC;;;;;0BACD,8OAAC,gBAAgB,OAAO;gBACtB,aAAU;gBACV,WAAW,IAAA,wHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,8OAAC,gBAAgB,KAAK;wBACpB,aAAU;wBACV,WAAU;;0CAEV,8OAAC,yMAAK;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,wHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,wHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,gBAAgB,KAAK;QACpB,aAAU;QACV,WAAW,IAAA,wHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,gBAAgB,WAAW;QAC1B,aAAU;QACV,WAAW,IAAA,wHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2841, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/Administrator/Desktop/ai-audio-reader/UI/app/reader/page.tsx"],"sourcesContent":["/**\r\n * Main Reader Page\r\n * Integrates all reader components with unified state management\r\n * Provides complete reading experience with TTS, translation, and AI features\r\n */\r\n\r\n'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useReaderState } from '../../hooks/useReaderState'\r\nimport { ReaderContent } from '../../components/reader/ReaderContent'\r\nimport { EnhancedBottomControlBar } from '../../components/reader/EnhancedBottomControlBar'\r\nimport { EnhancedRightSidePanel } from '../../components/reader/EnhancedRightSidePanel'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from '@/components/ui/dialog'\r\nimport { Upload, Link as LinkIcon, FileText } from 'lucide-react'\r\n\r\nexport default function ReaderPage() {\r\n  const readerState = useReaderState()\r\n  const [urlInput, setUrlInput] = useState('')\r\n  const [isUrlDialogOpen, setIsUrlDialogOpen] = useState(false)\r\n  const [isFileDialogOpen, setIsFileDialogOpen] = useState(false)\r\n\r\n  // Handle URL loading\r\n  const handleLoadUrl = async () => {\r\n    if (!urlInput.trim()) return\r\n\r\n    try {\r\n      await readerState.loadFromUrl(urlInput.trim())\r\n      setIsUrlDialogOpen(false)\r\n      setUrlInput('')\r\n    } catch (error) {\r\n      console.error('[ReaderPage] Failed to load URL:', error)\r\n      alert('Failed to load URL. Please check the URL and try again.')\r\n    }\r\n  }\r\n\r\n  // Handle file upload\r\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0]\r\n    if (!file) return\r\n\r\n    try {\r\n      await readerState.loadFromFile(file)\r\n      setIsFileDialogOpen(false)\r\n    } catch (error) {\r\n      console.error('[ReaderPage] Failed to load file:', error)\r\n      alert('Failed to load file. Please try again.')\r\n    }\r\n  }\r\n\r\n  // Handle AI summary generation\r\n  const handleGenerateSummary = async () => {\r\n    try {\r\n      // Get current chapter blocks (simplified: get all blocks for now)\r\n      const blocks = readerState.state.blocks\r\n\r\n      const response = await fetch('/api/ai/deepsummary', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          bookId: 'current-book',\r\n          blocks: blocks.map((b) => ({\r\n            type: b.type,\r\n            text: b.text,\r\n            level: b.level,\r\n          })),\r\n          level: 'short',\r\n        }),\r\n      })\r\n\r\n      const data = await response.json()\r\n\r\n      if (data.success && data.summary) {\r\n        alert(`Summary:\\n\\n${data.summary}`)\r\n      } else {\r\n        throw new Error(data.error || 'Failed to generate summary')\r\n      }\r\n    } catch (error) {\r\n      console.error('[ReaderPage] Summary generation failed:', error)\r\n      alert('Failed to generate summary. This feature requires API keys.')\r\n    }\r\n  }\r\n\r\n  // Handle AI question\r\n  const handleAskQuestion = async (question: string) => {\r\n    try {\r\n      const response = await fetch('/api/ai/query-memory', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          userId: 'demo-user',\r\n          bookId: 'current-book',\r\n          query: question,\r\n        }),\r\n      })\r\n\r\n      const data = await response.json()\r\n\r\n      if (data.success && data.answer) {\r\n        alert(`Answer:\\n\\n${data.answer}`)\r\n      } else {\r\n        throw new Error(data.error || 'Failed to get answer')\r\n      }\r\n    } catch (error) {\r\n      console.error('[ReaderPage] Question failed:', error)\r\n      alert('Failed to answer question. This feature requires API keys.')\r\n    }\r\n  }\r\n\r\n  // Determine layout based on state\r\n  const isRightPanelVisible = readerState.state.layoutMode !== 'single'\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen bg-background\">\r\n      {/* Header */}\r\n      <header className=\"h-16 border-b bg-background flex items-center justify-between px-6 sticky top-0 z-50\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <FileText className=\"h-6 w-6 text-primary\" />\r\n          <h1 className=\"text-xl font-bold\">AI Audio Reader</h1>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          {/* URL Input Dialog */}\r\n          <Dialog open={isUrlDialogOpen} onOpenChange={setIsUrlDialogOpen}>\r\n            <DialogTrigger asChild>\r\n              <Button variant=\"outline\" size=\"sm\">\r\n                <LinkIcon className=\"h-4 w-4 mr-2\" />\r\n                Load URL\r\n              </Button>\r\n            </DialogTrigger>\r\n            <DialogContent>\r\n              <DialogHeader>\r\n                <DialogTitle>Load from URL</DialogTitle>\r\n                <DialogDescription>\r\n                  Enter the URL of an article or webpage to read\r\n                </DialogDescription>\r\n              </DialogHeader>\r\n              <div className=\"flex gap-2 mt-4\">\r\n                <Input\r\n                  placeholder=\"https://example.com/article\"\r\n                  value={urlInput}\r\n                  onChange={(e) => setUrlInput(e.target.value)}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      handleLoadUrl()\r\n                    }\r\n                  }}\r\n                />\r\n                <Button onClick={handleLoadUrl} disabled={!urlInput.trim()}>\r\n                  Load\r\n                </Button>\r\n              </div>\r\n            </DialogContent>\r\n          </Dialog>\r\n\r\n          {/* File Upload Dialog */}\r\n          <Dialog open={isFileDialogOpen} onOpenChange={setIsFileDialogOpen}>\r\n            <DialogTrigger asChild>\r\n              <Button variant=\"outline\" size=\"sm\">\r\n                <Upload className=\"h-4 w-4 mr-2\" />\r\n                Upload File\r\n              </Button>\r\n            </DialogTrigger>\r\n            <DialogContent>\r\n              <DialogHeader>\r\n                <DialogTitle>Upload File</DialogTitle>\r\n                <DialogDescription>\r\n                  Upload a PDF, EPUB, TXT, or DOCX file to read\r\n                </DialogDescription>\r\n              </DialogHeader>\r\n              <div className=\"mt-4\">\r\n                <Input\r\n                  type=\"file\"\r\n                  accept=\".pdf,.epub,.txt,.docx,.md\"\r\n                  onChange={handleFileUpload}\r\n                />\r\n              </div>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Main Content Area */}\r\n      <div className=\"flex-1 flex overflow-hidden\">\r\n        {/* Reader Content */}\r\n        <div className=\"flex-1 overflow-auto\">\r\n          <ReaderContent\r\n            className={\r\n              readerState.state.layoutMode === 'split'\r\n                ? 'max-w-3xl mx-auto px-6 py-8'\r\n                : 'max-w-4xl mx-auto px-6 py-8'\r\n            }\r\n          />\r\n        </div>\r\n\r\n        {/* Right Side Panel */}\r\n        {isRightPanelVisible && (\r\n          <EnhancedRightSidePanel\r\n            readerState={readerState}\r\n            onGenerateSummary={handleGenerateSummary}\r\n            onAskQuestion={handleAskQuestion}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Bottom Control Bar */}\r\n      <EnhancedBottomControlBar readerState={readerState} />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}